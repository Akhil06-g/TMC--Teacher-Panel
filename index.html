<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TMC Teacher Panel</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
</head>
<body>
    <div id="teacherPanel" class="dashboard">
        <!-- Mobile Header -->
        <header class="mobile-header">
            <h1 id="mobileTeacherHeaderTitle">Teacher Panel</h1>
            <button class="hamburger" id="teacherHamburgerBtn" aria-label="Toggle menu">‚ò∞</button>
        </header>

        <!-- Sidebar -->
        <aside class="sidebar" id="teacherSidebar">
            <h2>Teacher Dashboard</h2>
            <button class="close-sidebar">√ó</button>
            <nav>
                <button title="Profile" id="teacherProfileBtn">üë§ Profile</button>
                <button title="Home Dashboard" id="teacherHomeBtn">üè† Home</button>
                <button title="Add a new student" id="addStudentBtn">üë©‚Äçüéì Add Student</button>
                <button title="View students list" id="studentsListBtn">üìã Students List</button>
                <button title="Assign homework" id="assignHomeworkBtn">üìù Assign Homework</button>
                <button title="Check homework status" id="homeworkStatusBtn">‚úÖ Homework Status</button>
                <button title="Record attendance" id="attendanceBtn">üìÖ Attendance</button>
                <button title="Assign sessional marks" id="sessionalMarksBtn">üìä Sessional Marks</button>
                <button title="View analytics" id="teacherAnalyticsBtn">üìà Analytics</button>
                <button title="Manage classes" id="manageClassesBtn">üè´ Manage Classes</button>
                <button title="Settings" id="teacherSettingsBtn">‚öôÔ∏è Settings</button>
            </nav>
            <button class="logout-btn" title="Logout" id="teacherLogoutBtn">üö™ Logout</button>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <header class="header">
                <h1 id="teacherHeaderTitle">Teacher Panel</h1>
                <div id="teacherLoading" class="loading" style="display: none;">Loading...</div>
            </header>

            <!-- Profile Section -->
            <section id="teacherProfileSection" class="data-section" style="display: none;">
                <h2>Teacher Profile</h2>
                <div class="profile-details">
                    <div class="profile-header">
                        <img id="teacherProfilePic" src="https://via.placeholder.com/120" alt="Profile Picture" class="profile-pic">
                        <div class="profile-info">
                            <h3 id="teacherProfileName">Teacher Name</h3>
                            <p id="teacherProfileEmail">email@example.com</p>
                            <p id="teacherProfileRole">Role: Teacher</p>
                        </div>
                    </div>
                    <div class="profile-stats">
                        <span><strong>Classes:</strong> <span id="teacherProfileClasses">0</span></span>
                        <span><strong>Students:</strong> <span id="teacherProfileStudents">0</span></span>
                        <span><strong>Homework Assigned:</strong> <span id="teacherProfileHomework">0</span></span>
                    </div>
                    <div class="profile-bio">
                        <h4>Bio</h4>
                        <p id="teacherProfileBio">No bio provided.</p>
                    </div>
                    <div class="profile-contact">
                        <h4>Contact Information</h4>
                        <p><strong>Phone:</strong> <span id="teacherProfilePhone">N/A</span></p>
                        <p><strong>Address:</strong> <span id="teacherProfileAddress">N/A</span></p>
                    </div>
                    <div class="profile-subjects">
                        <h4>Teaching Subjects</h4>
                        <p id="teacherProfileSubjects">None assigned.</p>
                    </div>
                </div>
                <div class="profile-actions">
                    <button id="editProfileBtn" class="form-btn">Edit Profile</button>
                    <button id="viewActivityBtn" class="form-btn">View Activity Log</button>
                    <button id="manageAuthoritiesBtn" class="form-btn">Manage Authorities</button>
                </div>
            </section>

            <!-- Profile Edit Section -->
            <section id="profileEditSection" class="form-section" style="display: none;">
                <h2>Edit Profile</h2>
                <form id="profileForm" class="form-grid">
                    <input type="text" id="profileName" placeholder="Full Name" required>
                    <input type="email" id="profileEmail" placeholder="Email" disabled>
                    <input type="tel" id="profilePhone" placeholder="Phone Number">
                    <input type="text" id="profileAddress" placeholder="Address">
                    <input type="text" id="profileSubjects" placeholder="Teaching Subjects (comma-separated)">
                    <textarea id="profileBio" placeholder="Bio (e.g., Teaching Philosophy)" rows="4"></textarea>
                    <div class="profile-pic-upload">
                        <label for="profilePic">Profile Picture</label>
                        <input type="file" id="profilePic" accept="image/*">
                        <img id="profilePicPreview" src="https://via.placeholder.com/100" alt="Preview" style="display: none;">
                    </div>
                    <button type="button" id="saveProfileBtn" class="form-btn save-btn">Save Profile</button>
                </form>
            </section>

            <!-- Activity Log Section -->
            <section id="recentActivitySection" class="data-section" style="display: none;">
                <h2>Activity Log</h2>
                <div class="filter-bar">
                    <input type="text" id="activitySearchInput" placeholder="Search activities">
                    <select id="activityFilter">
                        <option value="">All Activities</option>
                        <option value="add">Add</option>
                        <option value="update">Update</option>
                        <option value="delete">Delete</option>
                    </select>
                </div>
                <ul id="recentActivityList" class="activity-list"></ul>
            </section>

            <!-- Authorities Management Section -->
            <section id="authoritiesSection" class="data-section" style="display: none;">
                <h2>Manage Authorities</h2>
                <div class="authorities-info">
                    <p><strong>Current Role:</strong> <span id="currentRole">Teacher</span></p>
                    <p><strong>Permissions:</strong> <span id="currentPermissions">N/A</span></p>
                </div>
                <form id="authoritiesForm" class="form-grid">
                    <select id="authorityRole" required>
                        <option value="">Select Role</option>
                        <option value="admin">Admin (Full Access)</option>
                        <option value="editor">Editor (Manage Content)</option>
                        <option value="viewer">Viewer (Read-Only)</option>
                    </select>
                    <div class="permissions-checkboxes">
                        <label><input type="checkbox" id="permManageUsers"> Manage Users</label>
                        <label><input type="checkbox" id="permManageClasses"> Manage Classes</label>
                        <label><input type="checkbox" id="permAssignHomework"> Assign Homework</label>
                        <label><input type="checkbox" id="permRecordAttendance"> Record Attendance</label>
                        <label><input type="checkbox" id="permAssignMarks"> Assign Marks</label>
                    </div>
                    <button type="button" id="saveAuthoritiesBtn" class="form-btn save-btn">Save Authorities</button>
                </form>
                <h3>Assigned Authorities</h3>
                <table id="authoritiesTable">
                    <thead>
                        <tr>
                            <th>User</th>
                            <th>Role</th>
                            <th>Permissions</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </section>

            <!-- Home Section -->
            <section id="teacherHomeSection" class="data-section">
                <h2>Welcome, <span id="teacherName"></span>!</h2>
                <div class="stats-grid">
                    <div class="stat-card"><span>Total Students</span><span id="totalStudents">0</span></div>
                    <div class="stat-card"><span>Pending Homework</span><span id="pendingHomework">0</span></div>
                    <div class="stat-card"><span>Submitted Homework</span><span id="submittedHomework">0</span></div>
                    <div class="stat-card"><span>Next Due Date</span><span id="nextDueDate">N/A</span></div>
                </div>
                <div class="daily-tip"><strong>Daily Tip:</strong> <span id="dailyTip"></span></div>
            </section>

            <!-- Add Student Section -->
            <section id="addStudentSection" class="form-section" style="display: none;">
                <h2>Add Student</h2>
                <button id="addNewStudentBtn" class="form-btn">Add New Student</button>
                <form id="studentForm" class="form-grid" style="display: none;">
                    <input type="text" id="studentName" placeholder="Name" required>
                    <input type="text" id="rollNumber" placeholder="Roll Number" required>
                    <select id="studentClass" required></select>
                    <input type="password" id="studentPassword" placeholder="Student Login Password" required>
                    <button type="button" id="saveStudentBtn" class="form-btn save-btn">Save</button>
                </form>
            </section>

            <!-- Students List Section -->
            <section id="studentsListSection" class="data-section" style="display: none;">
                <h2>Students List</h2>
                <div class="filter-bar">
                    <input type="text" id="studentSearchInput" placeholder="Search by name or roll number">
                    <select id="studentClassFilter"></select>
                </div>
                <table id="studentTable">
                    <thead><tr><th>Name</th><th>Roll Number</th><th>Class</th><th>Actions</th></tr></thead>
                    <tbody></tbody>
                </table>
                <div class="pagination">
                    <button id="studentPrevPageBtn">Previous</button>
                    <span id="studentPageInfo"></span>
                    <button id="studentNextPageBtn">Next</button>
                </div>
            </section>

            <!-- Assign Homework Section -->
            <section id="assignHomeworkSection" class="form-section" style="display: none;">
                <h2>Assign Homework</h2>
                <form id="homeworkForm" class="form-grid">
                    <input type="text" id="homeworkTitle" placeholder="Title" required>
                    <textarea id="homeworkDescription" placeholder="Description" required></textarea>
                    <input type="date" id="homeworkDueDate" required>
                    <input type="file" id="homeworkFile">
                    <select id="homeworkTarget" required>
                        <option value="">Select Target</option>
                        <option value="all">All Students</option>
                        <option value="student">Specific Student</option>
                        <option value="class">Specific Class</option>
                    </select>
                    <select id="homeworkTargetSpecific" style="display: none;"></select>
                    <button type="button" id="saveHomeworkBtn" class="form-btn save-btn">Save</button>
                </form>
            </section>

            <!-- Homework Status Section -->
            <section id="homeworkStatusSection" class="data-section" style="display: none;">
                <h2>Homework Status</h2>
                <div class="filter-bar">
                    <input type="text" id="homeworkSearchInput" placeholder="Search by title">
                    <select id="homeworkStatusFilter">
                        <option value="">All Status</option>
                        <option value="Pending">Pending</option>
                        <option value="Submitted">Submitted</option>
                    </select>
                </div>
                <table id="homeworkTable">
                    <thead><tr><th>Title</th><th>Target</th><th>Due Date</th><th>Status</th><th>File</th><th>Actions</th></tr></thead>
                    <tbody></tbody>
                </table>
                <div class="pagination">
                    <button id="homeworkPrevPageBtn">Previous</button>
                    <span id="homeworkPageInfo"></span>
                    <button id="homeworkNextPageBtn">Next</button>
                </div>
            </section>

            <!-- Attendance Section -->
            <section id="attendanceSection" class="data-section" style="display: none;">
                <h2>Record Attendance</h2>
                <div class="filter-bar">
                    <select id="attendanceClass" required>
                        <option value="">Select Class</option>
                    </select>
                </div>
                <table id="attendanceTable">
                    <thead>
                        <tr>
                            <th>Name</th>
                            <th>Roll Number</th>
                            <th>Attendance Status</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
                <button id="saveAttendanceBtn" class="form-btn save-btn" disabled>Save Attendance</button>
                <h3>Past Attendance</h3>
                <div class="filter-bar">
                    <input type="date" id="pastAttendanceDate">
                    <select id="pastAttendanceClass">
                        <option value="">Select Class</option>
                    </select>
                </div>
                <table id="pastAttendanceTable">
                    <thead>
                        <tr>
                            <th>Name</th>
                            <th>Roll Number</th>
                            <th>Status</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </section>

            <!-- Sessional Marks Section -->
            <section id="sessionalMarksSection" class="form-section" style="display: none;">
                <h2>Sessional Marks</h2>
                <form id="sessionalMarksForm" class="form-grid">
                    <select id="marksClass" required>
                        <option value="">Select Class</option>
                    </select>
                    <select id="marksStudent" required>
                        <option value="">Select Student</option>
                    </select>
                    <input type="text" id="marksSubject" placeholder="Subject (e.g., Math)" required>
                    <select id="marksExamType" required>
                        <option value="">Select Exam Type</option>
                        <option value="Midterm">Midterm</option>
                        <option value="Final">Final</option>
                        <option value="Quiz">Quiz</option>
                        <option value="Assignment">Assignment</option>
                    </select>
                    <input type="number" id="marksObtained" placeholder="Marks Obtained" min="0" required>
                    <input type="number" id="marksMax" placeholder="Max Marks" min="1" required>
                    <input type="date" id="marksDate" required>
                    <button type="button" id="saveMarksBtn" class="form-btn save-btn">Save</button>
                </form>
                <h3>Assigned Marks</h3>
                <div class="filter-bar">
                    <input type="text" id="marksSearchInput" placeholder="Search by subject or student">
                    <select id="marksClassFilter">
                        <option value="">All Classes</option>
                    </select>
                </div>
                <table id="marksTable">
                    <thead>
                        <tr>
                            <th>Student</th>
                            <th>Class</th>
                            <th>Subject</th>
                            <th>Exam Type</th>
                            <th>Marks</th>
                            <th>Date</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
                <div class="pagination">
                    <button id="marksPrevPageBtn">Previous</button>
                    <span id="marksPageInfo"></span>
                    <button id="marksNextPageBtn">Next</button>
                </div>
            </section>

            <!-- Analytics Section -->
            <section id="teacherAnalyticsSection" class="data-section" style="display: none;">
                <h2>Analytics</h2>
                <div class="charts">
                    <canvas id="homeworkCompletionChart" width="400" height="200"></canvas>
                    <canvas id="studentWorkloadChart" width="400" height="200"></canvas>
                    <canvas id="marksDistributionChart" width="400" height="200"></canvas>
                </div>
            </section>

            <!-- Manage Classes Section -->
            <section id="manageClassesSection" class="data-section" style="display: none;">
                <h2>Manage Classes</h2>
                <button id="addNewClassBtn" class="form-btn">Add New Class</button>
                <form id="classForm" class="form-grid" style="display: none;">
                    <input type="text" id="className" placeholder="Class Name (e.g., 10A)" required>
                    <button type="button" id="saveClassBtn" class="form-btn save-btn">Save</button>
                </form>
                <table id="classTable">
                    <thead><tr><th>Class Name</th><th>Actions</th></tr></thead>
                    <tbody></tbody>
                </table>
            </section>

            <!-- Settings Section -->
            <section id="teacherSettingsSection" class="data-section" style="display: none;">
                <h2>Settings</h2>
                <div class="settings-options">
                    <label>Email:</label>
                    <input type="email" id="settingsEmail" disabled>
                    <button id="updateAccountBtn" class="form-btn">Update Account</button>
                    <label>Theme:</label>
                    <select id="teacherThemeSelect">
                        <option value="light">Light</option>
                        <option value="dark">Dark</option>
                        <option value="system">System</option>
                    </select>
                    <label><input type="checkbox" id="homeworkNotifications"> Homework Updates</label>
                    <label><input type="checkbox" id="studentNotifications"> Student Updates</label>
                    <button id="exportTeacherDataBtn" class="form-btn">‚¨áÔ∏è Export Data</button>
                </div>
            </section>
        </main>
    </div>

    <!-- Login Modal -->
    <div id="teacherLoginModal" class="modal" style="display: flex;">
        <div class="modal-content">
            <span class="close-btn" id="closeTeacherLoginBtn">√ó</span>
            <h2>Teacher Login</h2>
            <div id="accountSelection" class="account-selection">
                <div id="accountCircles" class="account-circles"></div>
                <button id="addAccountBtn" class="add-account-btn" title="Add new account">+</button>
            </div>
            <form id="teacherLoginForm" class="form-grid" style="display: none;">
                <input type="email" id="teacherLoginEmail" placeholder="Email" required>
                <input type="password" id="teacherLoginPassword" placeholder="Password" required>
                <button type="submit" id="teacherLoginBtn" class="form-btn">Login</button>
                <p>Not registered? <a href="#" id="switchToRegister">Register here</a></p>
            </form>
            <div id="teacherLoginError" class="error" style="display: none;"></div>
        </div>
    </div>

    <!-- Registration Modal -->
    <div id="teacherRegisterModal" class="modal" style="display: none;">
        <div class="modal-content">
            <span class="close-btn" id="closeTeacherRegisterBtn">√ó</span>
            <h2>Teacher Registration</h2>
            <form id="teacherRegisterForm" class="form-grid">
                <input type="email" id="teacherRegisterEmail" placeholder="Email" required>
                <input type="password" id="teacherRegisterPassword" placeholder="Password" required>
                <input type="password" id="teacherRegisterConfirmPassword" placeholder="Confirm Password" required>
                <button type="submit" id="teacherRegisterBtn" class="form-btn">Register</button>
                <p>Already registered? <a href="#" id="switchToLogin">Login here</a></p>
            </form>
            <div id="teacherRegisterError" class="error" style="display: none;"></div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script type="module" src="auth.js"></script>
    <script type="module" src="dataOperations.js"></script>
    <script type="module" src="uiOperations.js"></script>
    <script type="module" src="script.js"></script>
</body>
</html>
